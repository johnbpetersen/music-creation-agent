var o=globalThis,E=()=>{if(o.__createX402Web)return o.__createX402Web;if(o.x402Web?.createX402Web)return o.x402Web.createX402Web;throw Error("x402-web client unavailable")},u=document.getElementById("music-form"),d=document.getElementById("prompt"),m=document.getElementById("seconds"),p=document.getElementById("pay-button"),b=document.getElementById("status"),f=document.getElementById("player");if(!u||!d||!m||!p||!b||!f)throw Error("UI elements missing");var a=b,i=p,h=f,l=d,c=m,W=E()();function y(n){let t=Number(n);if(!Number.isFinite(t))return NaN;return Math.floor(t)}async function v(n,t){a.textContent="Payingâ€¦",i.disabled=!0;try{let e=await W.fetch("/entrypoints/music/invoke",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({input:{prompt:n,seconds:t}})});if(!e.ok){let g=await e.text();throw Error(`Request failed: ${g}`)}let r=(await e.json())?.output?.trackUrl;if(typeof r!=="string"||!r)throw Error("Missing trackUrl in response");h.src=r,a.textContent="Ready! Press play."}catch(e){console.error("music ui error:",e),a.textContent=e instanceof Error?e.message:"Payment failed."}finally{i.disabled=!1}}function s(){let n=l.value.trim(),t=y(c.value),e=n.length>0&&Number.isInteger(t)&&t>=5&&t<=120;i.disabled=!e}l.addEventListener("input",s);c.addEventListener("input",s);s();u.addEventListener("submit",(n)=>{n.preventDefault();let t=l.value.trim(),e=y(c.value);if(t.length===0||!Number.isInteger(e))return;v(t,e)});o.__musicUi={validate:s};
