var N=()=>{if(typeof window<"u"&&window.__createX402Web)return window.__createX402Web;if(typeof globalThis<"u"&&globalThis.__createX402Web)return globalThis.__createX402Web;if(typeof window<"u"&&window.x402Web?.createX402Web)return window.x402Web.createX402Web;throw Error("x402-web client unavailable")},J=document.getElementById("music-form"),D=document.getElementById("prompt"),F=document.getElementById("seconds"),A=document.getElementById("pay-button"),w=document.getElementById("status"),K=document.getElementById("player");if(!J||!D||!F||!A||!w||!K)throw Error("UI elements missing");var O=N()();function L(q){let j=Number(q);if(!Number.isFinite(j))return NaN;return Math.floor(j)}async function Q(q,j){w.textContent="Payingâ€¦",A.disabled=!0;try{let h=await O.fetch("/entrypoints/music/invoke",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({input:{prompt:q,seconds:j}})});if(!h.ok){let M=await h.text();throw Error(`Request failed: ${M}`)}let H=(await h.json())?.output?.trackUrl;if(typeof H!=="string"||!H)throw Error("Missing trackUrl in response");K.src=H,w.textContent="Ready! Press play."}catch(h){console.error("music ui error:",h),w.textContent=h instanceof Error?h.message:"Payment failed."}finally{A.disabled=!1}}function G(){let q=D.value.trim(),j=L(F.value),h=q.length>0&&Number.isInteger(j)&&j>=5&&j<=120;A.disabled=!h}D.addEventListener("input",G);F.addEventListener("input",G);G();J.addEventListener("submit",(q)=>{q.preventDefault();let j=D.value.trim(),h=L(F.value);if(j.length===0||!Number.isInteger(h))return;Q(j,h)});if(typeof window<"u")window.__musicUi={validate:G};
